{"version":3,"file":"static/js/821.b3537440.chunk.js","mappings":"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","sources":["components/Search/Search.styled.js","components/Search/Search.jsx","components/MaterialTable/MaterialTable.styled.js","components/MaterialTable/MaterialTable.jsx","pages/MaterialPage/MaterialPage.styled.js","pages/MaterialPage/MaterialPage.jsx","components/SearchResults/SearchResults.jsx"],"sourcesContent":["import styled from \"styled-components\";\n\nexport const FormStyled = styled.form`\n  padding-top: 5px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 40px;\n  margin-bottom: ${(props) => props.theme.space[2]}px;\n  @media screen and (min-width: 680px) {\n    width: 40%;\n  }\n`;\n\nexport const Label = styled.label`\n  width: 100%;\n`;\nexport const Input = styled.input`\n  font-size: ${(props) => props.theme.fontSizes.m};\n  width: 100%;\n  padding: 9px;\n  box-sizing: border-box;\n  border-top: ${(props) => props.theme.borders.bold};\n  border-bottom: ${(props) => props.theme.borders.bold};\n  border-left: ${(props) => props.theme.borders.none};\n  border-right: ${(props) => props.theme.borders.none};\n  text-decoration: none;\n  &:focus {\n    border-top: ${(props) => props.theme.borders.bold};\n    border-bottom: ${(props) => props.theme.borders.bold};\n    border-left: ${(props) => props.theme.borders.none};\n    border-right: ${(props) => props.theme.borders.none};\n  }\n`;\n","import React, { useState } from \"react\";\nimport { FormStyled, Input, Label } from \"./Search.styled\";\nimport { SearchButton, BackButton } from \"../Button/Button\";\n\nimport { IoSearch } from \"react-icons/io5\";\nimport { IoMdBackspace } from \"react-icons/io\";\nimport { toast } from \"react-toastify\";\nimport { BarLoader } from \"react-spinners\";\n\nconst Search = ({ submit, isLoading, back, isSubmiting }) => {\n  const [searchValue, setSearchValue] = useState(\"\");\n\n  const handleChange = (event) => {\n    const normalizedQuery = event.currentTarget.value.toLowerCase();\n    setSearchValue(normalizedQuery);\n  };\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n\n    if (searchValue.trim().length < 1) {\n      toast.error(\"Введіть запит в поле пошуку\");\n      return;\n    } else submit(searchValue.trim());\n  };\n\n  const clearQuery = () => {\n    setSearchValue(\"\");\n    back();\n  };\n\n  return (\n    <>\n      <FormStyled onSubmit={handleSubmit}>\n        <BackButton\n          icon={IoMdBackspace}\n          type=\"button\"\n          onClick={clearQuery}\n        ></BackButton>\n        <Label>\n          <Input\n            name=\"search\"\n            type=\"text\"\n            onChange={handleChange}\n            value={searchValue}\n          ></Input>\n        </Label>\n        <SearchButton\n          icon={IoSearch}\n          type=\"submit\"\n          onClick={handleSubmit}\n          disabled={isSubmiting}\n        ></SearchButton>\n      </FormStyled>\n      {isLoading && <BarLoader color=\"#125b56\" width=\"100%\" />}\n    </>\n  );\n};\n\nexport default Search;\n// _____________________________________________________________________________________\n","import styled from \"styled-components\";\n\nexport const ListWrapper = styled.div`\n  /* outline: 2px solid red; */\n  margin-left: -${(props) => props.theme.space[3]}px;\n`;\n","import React, { useEffect, useState } from \"react\";\nimport MaterialList from \"../MaterialList/MaterialList\";\nimport { getByLevel } from \"../../services/api\";\nimport { toast } from \"react-toastify\";\nimport { BarLoader } from \"react-spinners\";\nimport { ListWrapper } from \"./MaterialTable.styled\";\nimport ScrollToTopBtn from \"../ScrollToTopBtn/ScrollToTopBtn\";\n\nconst MaterialTable = ({ byId }) => {\n  const [mainCategory, setMainCategory] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n\n  // Запит по всі головні категорії при монтуванні компонента\n  useEffect(() => {\n    const controller = new AbortController();\n    async function getCategory() {\n      try {\n        setIsLoading(true);\n        const response = await getByLevel(2, controller.signal);\n        setMainCategory(response.data);\n      } catch {\n        toast.error(\"Щось пішло не так, спробуйте перезавантажити сторінку\");\n      } finally {\n        setIsLoading(false);\n      }\n    }\n    getCategory();\n    return () => {\n      setMainCategory([]);\n      controller.abort();\n    };\n  }, [setMainCategory]);\n\n  return (\n    <>\n      {isLoading ? (\n        <BarLoader color=\"#125b56\" width=\"100%\" />\n      ) : (\n        <ListWrapper>\n          <MaterialList\n            items={mainCategory}\n            style={{ padding: 0 }}\n            byId={byId}\n          />\n          <ScrollToTopBtn />\n        </ListWrapper>\n      )}\n    </>\n  );\n};\n\nexport default MaterialTable;\n","import styled from \"styled-components\";\n\nexport const MainTableWrapper = styled.div`\n  max-height: 85vh;\n`;\nexport const SearchWrapper = styled.div`\n  display: flex;\n  gap: 10px;\n  align-items: center;\n`;\n","import React, { useEffect, useState } from \"react\";\nimport MaterialTable from \"../../components/MaterialTable/MaterialTable\";\nimport Section from \"../../components/Section/Section\";\nimport Search from \"../../components/Search/Search\";\nimport SearchResults from \"../../components/SearchResults/SearchResults\";\nimport UnitSelect from \"../../components/UnitSelect/UnitSelect\";\nimport { createOptionsFromUnits } from \"../../services\";\nimport { checkIsString } from \"../../services\";\nimport { MainTableWrapper, SearchWrapper } from \"./MaterialPage.styled\";\nimport { toast } from \"react-toastify\";\nimport {\n  searchMaterialByDescription,\n  searchMaterialByCode,\n  getMaterialById,\n} from \"../../services/api\";\nimport MaterialList from \"../../components/MaterialList/MaterialList\";\n\nconst MaterialPage = () => {\n  const [searchResult, setSearchResult] = useState([]);\n  const [filteredResults, setFilteredResults] = useState([]);\n  const [unit, setUnit] = useState(null);\n  const [options, setOptions] = useState(null);\n  const [query, setQuery] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const [material, setMaterial] = useState([]);\n  const [status, setStatus] = useState(\"materials\"); // визначає що буде показано, матеріали чи результат пошуку по дереву\n\n  useEffect(() => {\n    const getVisibleMaterials = () => {\n      if (unit) {\n        return searchResult.filter((item) => item.Unit === unit);\n      }\n      return searchResult;\n    };\n    setFilteredResults(getVisibleMaterials);\n  }, [options, searchResult, unit]);\n\n  // Викликається під час відправлення форми\n  const backToTable = () => {\n    setSearchResult([]);\n    setFilteredResults([]);\n    setUnit(null);\n    setStatus(\"materials\");\n  };\n\n  // вибір одиниці виміру\n  const selectUnit = (option) => {\n    setUnit(option.value);\n  };\n\n  // Пошук елементів\n  const submit = (searchValue) => {\n    setStatus(\"search\");\n    const isString = checkIsString(searchValue);\n\n    if (isString) {\n      setQuery(searchValue);\n\n      // console.log(`search ${searchValue} by description`);\n      async function search(searchValue) {\n        setIsLoading(true);\n        setSearchResult([]);\n        try {\n          const response = await searchMaterialByDescription(searchValue);\n          if (response) {\n            setSearchResult(response.data);\n\n            // зробити опції для фільтру по unit\n            setOptions(createOptionsFromUnits(response.data));\n          }\n        } catch {\n          toast.error(`Не вдалось знайти ${searchValue}`, { autoClose: 3000 });\n        } finally {\n          setIsLoading(false);\n        }\n      }\n      search(searchValue);\n    } else {\n      async function search(searchValue) {\n        // console.log(`search ${codeNumber} by code`);\n        setIsLoading(true);\n        setSearchResult([]);\n        try {\n          const response = await searchMaterialByCode(searchValue);\n          // console.log(response.data);\n          if (response) {\n            setSearchResult(response.data);\n            setOptions(createOptionsFromUnits(response.data));\n          }\n        } catch {\n          toast.error(`Не вдалось знайти ${searchValue}`, { autoClose: 3000 });\n        } finally {\n          setIsLoading(false);\n        }\n      }\n      search(searchValue);\n    }\n  };\n\n  // Отримати по id\n  const materialById = (id) => {\n    setStatus(\"oneMaterial\");\n    const controller = new AbortController();\n    async function getMaterial(id) {\n      try {\n        //  setIsLoading(true);\n        const response = await getMaterialById(id, controller.signal);\n\n        setMaterial([response.data]);\n      } catch {\n        toast.error(\"Не вдалось отримати матеріал\");\n      } finally {\n        //  setIsLoading(false);\n      }\n    }\n    getMaterial(id);\n    return () => {\n      controller.abort();\n    };\n  };\n\n  return (\n    <>\n      <Section>\n        <SearchWrapper>\n          <Search\n            submit={submit}\n            isLoading={isLoading}\n            back={backToTable}\n            isSubmiting={isLoading}\n          />\n          <div style={{ minWidth: \"20%\" }}>\n            {searchResult?.length > 0 && (\n              <UnitSelect onSelect={selectUnit} options={options} />\n            )}\n          </div>\n        </SearchWrapper>\n      </Section>\n      <Section>\n        <MainTableWrapper>\n          {status === \"materials\" && <MaterialTable byId={materialById} />}\n\n          {status === \"oneMaterial\" && (\n            <MaterialList items={material} byId={materialById} />\n          )}\n\n          {status === \"search\" && (\n            <SearchResults\n              results={filteredResults}\n              query={query}\n              variant=\"material\"\n              byId={materialById}\n            />\n          )}\n        </MainTableWrapper>\n      </Section>\n    </>\n  );\n};\n\nexport default MaterialPage;\n","import React from \"react\";\nimport MaterialList from \"../MaterialList/MaterialList\";\nimport ServiceList from \"../ServiceList/ServiceList\";\n\nconst SearchResults = ({ results, query, variant, byId }) => {\n  if (variant === \"material\") {\n    return (\n      <div>\n        {results.length > 0 && (\n          <MaterialList items={results} query={query} byId={byId} />\n        )}\n      </div>\n    );\n  }\n  if (variant === \"service\") {\n    return (\n      <div>\n        {results.length > 0 && (\n          <ServiceList items={results} query={query} byId={byId} />\n        )}\n      </div>\n    );\n  }\n};\n\nexport default SearchResults;\n"],"names":["FormStyled","styled","form","props","theme","space","Label","label","Input","input","fontSizes","m","borders","bold","none","_ref","submit","isLoading","back","isSubmiting","searchValue","setSearchValue","useState","handleSubmit","event","preventDefault","trim","length","toast","error","_jsxs","_Fragment","children","onSubmit","_jsx","BackButton","icon","IoMdBackspace","type","onClick","clearQuery","name","onChange","normalizedQuery","currentTarget","value","toLowerCase","SearchButton","IoSearch","disabled","BarLoader","color","width","ListWrapper","div","byId","mainCategory","setMainCategory","setIsLoading","useEffect","controller","AbortController","async","response","getByLevel","signal","data","getCategory","abort","MaterialList","items","style","padding","ScrollToTopBtn","MainTableWrapper","SearchWrapper","MaterialPage","searchResult","setSearchResult","filteredResults","setFilteredResults","unit","setUnit","options","setOptions","query","setQuery","material","setMaterial","status","setStatus","getVisibleMaterials","filter","item","Unit","materialById","id","getMaterialById","getMaterial","Section","Search","checkIsString","search","searchMaterialByDescription","createOptionsFromUnits","autoClose","searchMaterialByCode","backToTable","minWidth","UnitSelect","onSelect","option","MaterialTable","SearchResults","results","variant","ServiceList"],"sourceRoot":""}